{"version":3,"file":"index.js","sources":["../src/actions.ts","../src/HistoryController/HistoryController.ts","../src/HistoryController/HistoryControllerComponent.tsx","../src/HistoryController/HistoryControllerMiddleware.ts"],"sourcesContent":["const PUSH_TYPE = '@history-controller/push';\nconst REPLACE_TYPE = '@history-controller/replace';\nconst GO_TYPE = '@history-controller/go';\nconst GO_BACK_TYPE = '@history-controller/goBack';\nconst GO_FORWARD_TYPE = '@history-controller/goForward';\n\nconst createHistoryAction = (type: string) => (path: string) => ({\n  path,\n  type\n});\n\nconst push = createHistoryAction(PUSH_TYPE);\nconst replace = createHistoryAction(REPLACE_TYPE);\nconst go = createHistoryAction(GO_TYPE);\nconst goBack = createHistoryAction(GO_BACK_TYPE);\nconst goForward = createHistoryAction(GO_FORWARD_TYPE);\n\nexport {\n  push,\n  replace,\n  go,\n  goBack,\n  goForward,\n\n  PUSH_TYPE,\n  REPLACE_TYPE,\n  GO_TYPE,\n  GO_BACK_TYPE,\n  GO_FORWARD_TYPE\n};\n","import { Action } from 'redux';\nimport { History } from 'history';\n\nimport {\n  PUSH_TYPE,\n  REPLACE_TYPE,\n  GO_TYPE,\n  GO_BACK_TYPE,\n  GO_FORWARD_TYPE\n} from '../actions';\n\nexport default class HistoryController {\n  private static history: History;\n\n  private static actionsMap: { [type: string]: Function };\n\n  public static setHistory(history: History) {\n    HistoryController.history = history;\n    HistoryController.actionsMap = {\n      [GO_BACK_TYPE]: history.goBack,\n      [GO_FORWARD_TYPE]: history.goForward,\n      [GO_TYPE]: history.go,\n      [PUSH_TYPE]: history.push,\n      [REPLACE_TYPE]: history.replace\n    };\n  }\n\n  public static acceptAction(action: Action<string>) {\n    if (HistoryController.history) {\n      HistoryController.dispatchHistoryEvent(action);\n    }\n  }\n\n  private static dispatchHistoryEvent(action: { type: string, path?: string }) {\n    const historyFunc = HistoryController.actionsMap[action.type];\n\n    if (historyFunc) {\n      historyFunc(action.path);\n    }\n  }\n}\n","import { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { RouteComponentProps } from 'react-router';\n\nimport HistoryController from './HistoryController';\n\nclass HistoryControllerComponent extends Component<RouteComponentProps> {\n  constructor(props: RouteComponentProps) {\n    super(props);\n\n    HistoryController.setHistory(props.history);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport default withRouter(HistoryControllerComponent);\n","import { Action, Dispatch } from 'redux';\n\nimport HistoryController from './HistoryController';\n\nfunction HistoryControllerMiddleware() {\n  return (next: Dispatch) => (action: Action) => {\n    HistoryController.acceptAction(action);\n\n    const returnValue = next(action);\n\n    return returnValue;\n  };\n}\n\nexport default HistoryControllerMiddleware;\n"],"names":["PUSH_TYPE","REPLACE_TYPE","GO_TYPE","GO_BACK_TYPE","createHistoryAction","type","path","push","replace","go","goBack","goForward","HistoryController","setHistory","history","actionsMap","acceptAction","action","dispatchHistoryEvent","historyFunc","withRouter","constructor","props","render","Component","next"],"mappings":"qDAAMA,EAAY,2BACZC,EAAe,8BACfC,EAAU,yBACVC,EAAe,6BAGfC,WAAuBC,mBAAkBC,eAC7CA,OACAD,KAGIE,EAAOH,EAAoBJ,GAC3BQ,EAAUJ,EAAoBH,GAC9BQ,EAAKL,EAAoBF,GACzBQ,EAASN,EAAoBD,GAC7BQ,EAAYP,EAXM,iCCOHQ,iBAKLC,oBAAWC,SACvBF,EAAkBE,QAAUA,IACVC,eAAa,IAC5BZ,GAAeW,EAAQJ,SDfN,iCCgBCI,EAAQH,YAC1BT,GAAUY,EAAQL,KAClBT,GAAYc,EAAQP,OACpBN,GAAea,EAAQN,cAIdQ,sBAAaC,GACrBL,EAAkBE,SACpBF,EAAkBM,qBAAqBD,MAI5BC,8BAAqBD,OAC5BE,EAAcP,EAAkBG,WAAWE,EAAOZ,MAEpDc,GACFA,EAAYF,EAAOX,OC/BzB,MAYec,yBAXbC,WAAYC,eACJA,GAENV,EAAkBC,WAAWS,EAAMR,yGAGrCS,yBACS,SAR8BC,6ECD/BC,mBAAoBR,UAC1BL,EAAkBI,aAAaC,GAEXQ,EAAKR,0OHJL"}